<!DOCTYPE html>
<html lang="en">

<head>
  <title>User Profile</title>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/vendor/normalize-4.1.1.css" />
  <link rel="stylesheet" href="/vendor/border-box.css" />
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/layout.css" />
  <link rel="stylesheet" href="/styles/utility.css" />
  <link rel="stylesheet" href="/styles/edit-user-modal.css" />
  <!-- <link rel="stylesheet" href="/styles/profile-page.css" /> -->



  <script src="/vendor/jquery-3.0.0.js"></script>
  <script defer src="/scripts/app.js"></script>
  <script defer src="/scripts/users.js"></script>
  <script defer src="/scripts/delete-resources.js"></script>
  <script defer src="/scripts/unlike-resources.js"></script>
  <script defer type="module" src="/scripts/modal.js"></script>
  <script defer type="module" src="/scripts/resources.js"></script>
  <script defer type="module" src="/scripts/edit-modal.js"></script>

</head>

<body>
  <%- include('partials/_header') %>
    <div id="user-profile" class="user-profile">
      <img src="https://placekitten.com/200/200" alt="user's avatar" />
      <span>
        <%= user.username %>
      </span>
      <button id="edit_user" class="btn_user">Edit Profile</button>
      <div id="<%= user.id %>" class="modal modal_profile flex hidden">
        <div class="modal_inner modal_profile--inner flex">
          <button id="modal_close">X</button>
          <div class="user_image">
            <img src="https://placekitten.com/200/200" alt="user's avatar" />
          </div>
          <div class="user_form">
            <form id="user_form-edit" method="PUT" action="/users/<%= user.id %>">
              <div class="hidden">
                <label for="user_id"></label>
                <input id="user_id" type="number" value="<%= user.id %>" disabled>
              </div>
              <div>
                <label for="username">Username</label>
                <input id="username" value="<%= user.username %>" type="text">
              </div>
              <div>
                <label for="first_name">First Name</label>
                <input id="first_name" value="<%= user.first_name %>" type="text">
              </div>
              <div>
                <label for="last_name">Last Name</label>
                <input id="last_name" value="<%= user.last_name %>" type="text">
              </div>
              <div>
                <label for="user_email">Email</label>
                <input id="user_email" value="<%= user.email %>" type="email">
              </div>
              <div class="form_button--container">
                <button type="submit">Submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <div id="user-resources" class="user-resources flex">
      <!-- <h1>My Saved Resources</h1>
      <select name="category" id="user-category-select">
        <option value="0">Select All</option>
        <option value="1">Javascript</option>
        <option value="2">CSS</option>
        <option value="3">React</option>
        <option value="4">SQL</option>
        <option value="5">Express</option>
        <option value="6">Ruby</option>
      </select> -->
      <div id="user-resources_display" class="gallery user-resources_display flex">
        <div id="resource_modal-container" class="modal modal_profile flex hidden">
          <!-- Append edit or view resource modals here -->
        </div>
        <% for (let resource of resources) { %>
          <% let owned=resource.creator_id===user.id ? true : false %>
            <% let resourceId=resource.resource_id%>
              <div id="<%= resourceId %>" class="flex resource-item category_id-<%=resource.category_id%>">
                <div class="resource-item--inner flex">
                  <h3>
                    <%= resource.title %>
                  </h3>
                  <div class="image-container">
                    <img src="<%= resource.thumbnail_url %>" />
                    <p class="description">
                      <%= resource.description %>
                    </p>
                  </div>
                </div>
                <div class="resource-buttons">
                  <!--
                  If the resource is owned, the id should be for the resources table
                  Otherwise, it should be for the likes table
                -->
                  <% if (owned) { %>
                    <button id="delete_<%= resourceId %>" class="btn_delete">Delete</button>
                    <button id="edit_<%= resourceId %>" class="btn_edit">Edit</button>
                    <% } else { %>
                      <button id="unlike_<%= resource.likes_id %>" class="btn_unlike">Unlike</button>
                      <% } %>
                </div>
              </div>
              <% } %>
      </div>
    </div>
    <!-- Footer partial here -->
    <%- include('partials/_footer') %>
</body>

</html>